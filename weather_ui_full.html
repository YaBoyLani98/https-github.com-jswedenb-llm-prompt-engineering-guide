<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7-Day Weather App</title>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #2C2C2C;
      margin: 0;
      padding: 20px;
      text-align: center;
    }

    .button {
      padding: 10px 20px;
      font-size: 16px;
      margin-bottom: 20px;
      border-radius: 8px;
      background-color: #0288d1;
      color: white;
      border: none;
      cursor: pointer;
    }

    .grid {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .card {
      position: relative;
      background-color: #ffffff;
      padding: 15px;
      border-radius: 12px;
      width: 180px;
      border: 3px solid #d19002;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      transition: transform 0.25s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    }

    .card:hover {
      transform: translateY(-6px) scale(1.05);
      border-color: #ff8c00;
      box-shadow: 0 0 12px #ff8c00, 0 0 22px #ff8c00;
      animation: bounce 0.35s ease;
    }

    @keyframes bounce {
      0% { transform: translateY(0) scale(1); }
      30% { transform: translateY(-8px) scale(1.05); }
      60% { transform: translateY(-4px) scale(1.03); }
      100% { transform: translateY(-6px) scale(1.05); }
    }

    .day {
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 18px;
    }
  </style>
</head>

<body>
  <h1 style="color: #FF5733;">7-Day Weather Forecast</h1>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    function WeatherApp() {
      const [city, setCity] = useState("Fairfax");
      const [weatherData, setWeatherData] = useState(
        Array(7).fill({ temp: "--", humidity: "--", wind: "--", precipitation: "--" })
      );

      const fetchWeather = async () => {
        try {
          const API_KEY = "6a6cf4a74cf6beb5bcfa1a7179178118";

          const geo = await fetch(
            `https://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=1&appid=${API_KEY}`
          );
          const geoData = await geo.json();

          if (!geoData.length) throw new Error("City not found");

          const lat = geoData[0].lat;
          const lon = geoData[0].lon;

          const response = await fetch(
            `https://api.openweathermap.org/data/3.0/onecall?lat=${lat}&lon=${lon}&units=metric&exclude=minutely,hourly,current,alerts&appid=${API_KEY}`
          );

          const data = await response.json();

          const updated = data.daily.slice(0, 7).map((entry) => ({
            temp: ((entry.temp.day * 9) / 5 + 32).toFixed(1),
            humidity: entry.humidity,
            wind: entry.wind_speed,
            precipitation: Math.round(entry.pop * 100),
          }));

          setWeatherData(updated);
        } catch (err) {
          console.error("Weather API error:", err);
          alert("Failed to fetch weather. Check your city name or API plan.");
        }
      };

      return (
        <div>
          <input
            type="text"
            value={city}
            onChange={(e) => setCity(e.target.value)}
            placeholder="Enter city name"
            style={{ padding: "8px", fontSize: "16px", marginRight: "10px" }}
          />

          <button className="button" onClick={fetchWeather}>
            Update Weather
          </button>

          <div className="grid">
            {weatherData.map((entry, i) => {
              const date = new Date();
              date.setDate(date.getDate() + i);

              const weekday = date.toLocaleDateString("en-US", { weekday: "long" });
              const formattedDate = date.toLocaleDateString("en-US", {
                month: "short",
                day: "numeric",
              });

              return (
                <div key={i} className="card">
                  <div className="day">
                    {weekday} <br />
                    <span style={{ fontSize: "14px", color: "#555" }}>{formattedDate}</span>
                  </div>
                  <p><strong>Temp:</strong> {entry.temp}Â°F</p>
                  <p><strong>Humidity:</strong> {entry.humidity}%</p>
                  <p><strong>Wind:</strong> {entry.wind} m/s</p>
                  <p><strong>Precipitation:</strong> {entry.precipitation}%</p>
                </div>
              );
            })}
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<WeatherApp />);
  </script>
</body>
</html>
